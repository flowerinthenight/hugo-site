<!doctype html><html data-paige="Paige theme from https://github.com/willfaught/paige" lang=en><head><meta charset=utf-8><meta content="#0d6efd" name=msapplication-TileColor><meta content="/browserconfig.xml" name=msapplication-config><meta content="https://github.com/willfaught/paige" name=theme><meta content="#0d6efd" name=theme-color><meta content="width=device-width,initial-scale=1" name=viewport><meta property="og:url" content="https://flowerinthenight.com/tags/golang/"><meta property="og:site_name" content="flowerinthenight"><meta property="og:title" content="Golang"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Golang"><title>Golang · Tags · About</title>
<link href=/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/favicon.ico rel="shortcut icon"><link href=/favicon.png rel=icon type=image/png><link href=/favicon.svg rel=icon type=image/svg+xml><link href=/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link color=#0d6efd href=/safari-pinned-tab.svg rel=mask-icon><link href=/site.webmanifest rel=manifest><link crossorigin=anonymous href=/css/paige/bootstrap/6186ad141d391e4c0c10d2e9cb4eaeaadf75e809-paige.min.1c5bb4860fb7f3809f4195b145668aade87f2e92cf701992599678b1d166f0f0.css integrity="sha256-HFu0hg+384CfQZWxRWaKreh/LpLPcBmSWZZ4sdFm8PA=" referrerpolicy=no-referrer rel=stylesheet><link crossorigin=anonymous href=/css/paige/bootstrap-icons/bootstrap-icons.min.540116b7267d4b2410c74086ae6497566928c6d5715900be7ce7279ad45addcd.css integrity="sha256-VAEWtyZ9SyQQx0CGrmSXVmkoxtVxWQC+fOcnmtRa3c0=" referrerpolicy=no-referrer rel=stylesheet><link href=https://flowerinthenight.com/tags/golang/atom.xml rel=alternate type=application/atom+xml><link href=https://flowerinthenight.com/tags/golang/rss.xml rel=alternate type=application/rss+xml><style>#paige-authors,#paige-breadcrumbs,#paige-credit,#paige-date,#paige-file,#paige-keywords,#paige-prev-next,#paige-reading-time,#paige-series,#paige-toc,.paige-authors,.paige-date,.paige-keywords,.paige-reading-time,.paige-series,.paige-summary{display:none}.paige-figure-numbered{counter-increment:paige-figure-numbered}.paige-figure-numbered>div>figure>figcaption::before{content:"Figure " counter(paige-figure-numbered)": "}.paige-figure-numbered>div>figure>figcaption:empty::before{content:"Figure " counter(paige-figure-numbered)}.paige-header-link{opacity:0;margin-left:.5rem;position:absolute;transition:color .15s ease-in-out,opacity .15s ease-in-out}.paige-header-link::after{content:"#"}.paige-quote .blockquote-footer{margin-top:0}.paige-quote blockquote{border-left:0;border-right:0;margin-bottom:0;padding:0}#paige-content>*{margin-bottom:1rem}blockquote{padding:.5rem 1rem;border-left:.25rem solid var(--bs-border-color);border-right:.25rem solid var(--bs-body-bg)}td,th{padding:.25rem}.highlight .chroma .hl,.highlight .chroma .lnt{display:flex}.paige-figure .paige-quote,.paige-figure .paige-video,.paige-figure .highlight pre.chroma,.paige-figure .highlight .chroma pre,.paige-figure .paige-quote blockquote,.paige-figure figure>div>:last-child,.paige-gallery .paige-figure,.paige-gallery .paige-image,blockquote>p:last-of-type{margin-bottom:0}.paige-figure,.paige-gallery,.paige-image,.paige-quote,.paige-video,table{margin-bottom:1rem}.paige-header-link:focus,.paige-header-link:hover,:hover>.paige-header-link,:target>.paige-header-link{opacity:1}@media(prefers-color-scheme:dark){.bg{color:#c9d1d9;background-color:var(--bs-body-bg)}.chroma{color:#c9d1d9;background-color:var(--bs-body-bg)}.chroma .x{}.chroma .err{color:#f85149}.chroma .cl{}.chroma .lnlinks{outline:none;text-decoration:none;color:inherit}.chroma .lntd{vertical-align:top;padding:0;margin:0;border:0}.chroma .lntable{border-spacing:0;padding:0;margin:0;border:0}.chroma .hl{background-color:#4f4f4d}.chroma .lnt{white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#64686c}.chroma .ln{white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#6e7681}.chroma .line{display:flex}.chroma .k{color:#ff7b72}.chroma .kc{color:#79c0ff}.chroma .kd{color:#ff7b72}.chroma .kn{color:#ff7b72}.chroma .kp{color:#79c0ff}.chroma .kr{color:#ff7b72}.chroma .kt{color:#ff7b72}.chroma .n{}.chroma .na{}.chroma .nb{}.chroma .bp{}.chroma .nc{color:#f0883e;font-weight:700}.chroma .no{color:#79c0ff;font-weight:700}.chroma .nd{color:#d2a8ff;font-weight:700}.chroma .ni{color:#ffa657}.chroma .ne{color:#f0883e;font-weight:700}.chroma .nf{color:#d2a8ff;font-weight:700}.chroma .fm{}.chroma .nl{color:#79c0ff;font-weight:700}.chroma .nn{color:#ff7b72}.chroma .nx{}.chroma .py{color:#79c0ff}.chroma .nt{color:#7ee787}.chroma .nv{color:#79c0ff}.chroma .vc{}.chroma .vg{}.chroma .vi{}.chroma .vm{}.chroma .l{color:#a5d6ff}.chroma .ld{color:#79c0ff}.chroma .s{color:#a5d6ff}.chroma .sa{color:#79c0ff}.chroma .sb{color:#a5d6ff}.chroma .sc{color:#a5d6ff}.chroma .dl{color:#79c0ff}.chroma .sd{color:#a5d6ff}.chroma .s2{color:#a5d6ff}.chroma .se{color:#79c0ff}.chroma .sh{color:#79c0ff}.chroma .si{color:#a5d6ff}.chroma .sx{color:#a5d6ff}.chroma .sr{color:#79c0ff}.chroma .s1{color:#a5d6ff}.chroma .ss{color:#a5d6ff}.chroma .m{color:#a5d6ff}.chroma .mb{color:#a5d6ff}.chroma .mf{color:#a5d6ff}.chroma .mh{color:#a5d6ff}.chroma .mi{color:#a5d6ff}.chroma .il{color:#a5d6ff}.chroma .mo{color:#a5d6ff}.chroma .o{color:#ff7b72;font-weight:700}.chroma .ow{color:#ff7b72;font-weight:700}.chroma .p{}.chroma .c{color:#8b949e;font-style:italic}.chroma .ch{color:#8b949e;font-style:italic}.chroma .cm{color:#8b949e;font-style:italic}.chroma .c1{color:#8b949e;font-style:italic}.chroma .cs{color:#8b949e;font-weight:700;font-style:italic}.chroma .cp{color:#8b949e;font-weight:700;font-style:italic}.chroma .cpf{color:#8b949e;font-weight:700;font-style:italic}.chroma .g{}.chroma .gd{color:#ffa198;background-color:#490202}.chroma .ge{font-style:italic}.chroma .gr{color:#ffa198}.chroma .gh{color:#79c0ff;font-weight:700}.chroma .gi{color:#56d364;background-color:#0f5323}.chroma .go{color:#8b949e}.chroma .gp{color:#8b949e}.chroma .gs{font-weight:700}.chroma .gu{color:#79c0ff}.chroma .gt{color:#ff7b72}.chroma .gl{text-decoration:underline}.chroma .w{color:#6e7681}}@media(prefers-color-scheme:light){.bg{background-color:#fff}.chroma{background-color:#fff}.chroma .x{}.chroma .err{color:#a61717;background-color:#e3d2d2}.chroma .cl{}.chroma .lnlinks{outline:none;text-decoration:none;color:inherit}.chroma .lntd{vertical-align:top;padding:0;margin:0;border:0}.chroma .lntable{border-spacing:0;padding:0;margin:0;border:0}.chroma .hl{background-color:#ffc}.chroma .lnt{white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .ln{white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .line{display:flex}.chroma .k{color:#000;font-weight:700}.chroma .kc{color:#000;font-weight:700}.chroma .kd{color:#000;font-weight:700}.chroma .kn{color:#000;font-weight:700}.chroma .kp{color:#000;font-weight:700}.chroma .kr{color:#000;font-weight:700}.chroma .kt{color:#458;font-weight:700}.chroma .n{}.chroma .na{color:teal}.chroma .nb{color:#0086b3}.chroma .bp{color:#999}.chroma .nc{color:#458;font-weight:700}.chroma .no{color:teal}.chroma .nd{color:#3c5d5d;font-weight:700}.chroma .ni{color:purple}.chroma .ne{color:#900;font-weight:700}.chroma .nf{color:#900;font-weight:700}.chroma .fm{}.chroma .nl{color:#900;font-weight:700}.chroma .nn{color:#555}.chroma .nx{}.chroma .py{}.chroma .nt{color:navy}.chroma .nv{color:teal}.chroma .vc{color:teal}.chroma .vg{color:teal}.chroma .vi{color:teal}.chroma .vm{}.chroma .l{}.chroma .ld{}.chroma .s{color:#d14}.chroma .sa{color:#d14}.chroma .sb{color:#d14}.chroma .sc{color:#d14}.chroma .dl{color:#d14}.chroma .sd{color:#d14}.chroma .s2{color:#d14}.chroma .se{color:#d14}.chroma .sh{color:#d14}.chroma .si{color:#d14}.chroma .sx{color:#d14}.chroma .sr{color:#009926}.chroma .s1{color:#d14}.chroma .ss{color:#990073}.chroma .m{color:#099}.chroma .mb{color:#099}.chroma .mf{color:#099}.chroma .mh{color:#099}.chroma .mi{color:#099}.chroma .il{color:#099}.chroma .mo{color:#099}.chroma .o{color:#000;font-weight:700}.chroma .ow{color:#000;font-weight:700}.chroma .p{}.chroma .c{color:#998;font-style:italic}.chroma .ch{color:#998;font-style:italic}.chroma .cm{color:#998;font-style:italic}.chroma .c1{color:#998;font-style:italic}.chroma .cs{color:#999;font-weight:700;font-style:italic}.chroma .cp{color:#999;font-weight:700;font-style:italic}.chroma .cpf{color:#999;font-weight:700;font-style:italic}.chroma .g{}.chroma .gd{color:#000;background-color:#fdd}.chroma .ge{color:#000;font-style:italic}.chroma .gr{color:#a00}.chroma .gh{color:#999}.chroma .gi{color:#000;background-color:#dfd}.chroma .go{color:#888}.chroma .gp{color:#555}.chroma .gs{font-weight:700}.chroma .gu{color:#aaa}.chroma .gt{color:#a00}.chroma .gl{text-decoration:underline}.chroma .w{color:#bbb}}@media(prefers-reduced-motion:reduce){.paige-header-link{transition:none}}#paige-content>*{margin-left:auto;margin-right:auto;max-width:60rem}</style></head><body class="d-flex flex-column"><div class="container flex-fill" id=paige-root><div class=row><div class=col><header class=my-3 id=paige-header><p class="display-1 fw-bold mb-2 text-center" id=paige-site-title>f/t</p><nav><ul class="align-items-center justify-content-center nav"><li class=nav-item><a class="nav-link text-decoration-underline" href=/>Home</a></li><li class=nav-item><a class="nav-link text-decoration-underline" href=/blog/>Blog</a></li><li class=nav-item><a class="nav-link text-decoration-underline" href=/bookshelf/>Bookshelf</a></li><li class=nav-item><a aria-current=page class="active text-body-emphasis nav-link text-decoration-underline" href=/tags/>Tags</a></li><li class=nav-item><a class="nav-link text-decoration-underline" href=/search/>Search</a></li></ul></nav><nav aria-label=Breadcrumbs class=mt-3 id=paige-breadcrumbs><div class="d-flex justify-content-center"><ol class="breadcrumb mb-0"><li class=breadcrumb-item><a href=/>About</a></li><li class=breadcrumb-item><a href=/tags/>Tags</a></li></ol></div></nav><script async src="https://www.googletagmanager.com/gtag/js?id=G-EZWHM5C9YT"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EZWHM5C9YT")}</script></header><main class=mt-3 id=paige-main><article class="paige-published paige-term" id=paige-article><div class="align-items-center d-flex flex-column mb-0"><div class=mw-100 id=paige-metadata><h1 class="fw-bold text-center" id=paige-title>Golang</h1></div></div></article><div id=paige-pages><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2024-05-30-memx-memory-usage-linux/>memx - Get process’ memory usage (Linux)</a></p><p class="mb-0 paige-description text-center">2024-05-30</p><p class="fst-italic mb-0 paige-summary text-center">I shared a simple piece of code for getting a process’ memory usage in Linux. It’s called memx. It’s Linux-specific only as it reads the proportional set size (PSS) data from either /proc/{pid}/smaps_rollup (if present) or /proc/{pid}/smaps file. I’ve used this piece of code many times at work. We use memory-mapped files extensively in some of our services and this is how we get more accurate results. Very useful in debugging OOMKilled events in k8s.</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/linux/>Linux</a> · <a class=link-secondary href=/tags/memory/>Memory</a> · <a class=link-secondary href=/tags/process/>Process</a> · <a class=link-secondary href=/categories/tech/>Tech</a> · <a class=link-secondary href=/tags/usage/>Usage</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2024-05-30>May 30, 2024</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2024-05-03-oomkill-watch/>oomkill-watch - A tool to watch OOMKilled events in k8s</a></p><p class="mb-0 paige-description text-center">2024-05-03</p><p class="fst-italic mb-0 paige-summary text-center">I recently uploaded a tool to GitHub that wraps the kubectl get events -w command for watching OOMKilled events in Kubernetes. It’s called oomkill-watch. You can check out the code here. You might find this useful.</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/events/>Events</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/k8s/>K8s</a> · <a class=link-secondary href=/tags/kubectl/>Kubectl</a> · <a class=link-secondary href=/tags/oomkilled/>Oomkilled</a> · <a class=link-secondary href=/categories/tech/>Tech</a> · <a class=link-secondary href=/tags/watch/>Watch</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2024-05-03>May 3, 2024</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2023-04-13-homebrew-golang-p2/>Using Homebrew for distributing Go apps (part 2)</a></p><p class="mb-0 paige-description text-center">2023-04-13</p><p class="fst-italic mb-0 paige-summary text-center">For personal reference: This is a followup on a previous post that is a bit more manual. This is a little bit easier. a) Create your own Homebrew tap Create a new GitHub public repository with a prefix homebrew-, i.e. homebrew-tap. This will host all the apps that you want to distribute via your tap. Users will install your apps using the following commands:
No need to include the 'homebrew-' prefix $ brew tap flowerinthenight/tap $ brew install &lt;toolname> # Or one-liner $ brew install flowerinthenight/tap/&lt;toolname> b) Let’s use Github Actions to setup goreleaser First, add a .</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/go/>Go</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/goreleaser/>Goreleaser</a> · <a class=link-secondary href=/tags/homebrew/>Homebrew</a> · <a class=link-secondary href=/tags/ruby/>Ruby</a> · <a class=link-secondary href=/categories/tech/>Tech</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2023-04-13>April 13, 2023</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2023-03-01-authenticate-aws-sdk-v2-external-id/>Authenticating Go AWS SDK v2 using external id</a></p><p class="mb-0 paige-description text-center">2023-03-01</p><p class="fst-italic mb-0 paige-summary text-center">For self reference:
Sample code as to how to authenticate aws-sdk-go-v2 using external ids:</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/assume/>Assume</a> · <a class=link-secondary href=/tags/aws/>Aws</a> · <a class=link-secondary href=/tags/external-id/>External-Id</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/roles/>Roles</a> · <a class=link-secondary href=/tags/sdk/>Sdk</a> · <a class=link-secondary href=/categories/tech/>Tech</a> · <a class=link-secondary href=/tags/v2/>V2</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2023-03-01>March 1, 2023</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2022-10-17-authenticate-aws-sdk-external-id/>Authenticating Go AWS SDK using external id</a></p><p class="mb-0 paige-description text-center">2022-10-17</p><p class="fst-italic mb-0 paige-summary text-center">For self reference:
Sample code as to how to authenticate aws-sdk-go using external ids:</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/assume/>Assume</a> · <a class=link-secondary href=/tags/aws/>Aws</a> · <a class=link-secondary href=/tags/external-id/>External-Id</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/roles/>Roles</a> · <a class=link-secondary href=/tags/sdk/>Sdk</a> · <a class=link-secondary href=/categories/tech/>Tech</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2022-10-17>October 17, 2022</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2022-09-21-spindle-based-distributed-computing-lib/>hedge - A simple distributed computing library</a></p><p class="mb-0 paige-description text-center">2022-09-21</p><p class="fst-italic mb-0 paige-summary text-center">This library has been in our production for about a year already and is one of the critical components in our backend. We mainly use it for app-level orchestration between pods. It’s called hedge and you can find the code here. Maybe it will be useful to anybody out there.</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/distributed-computing/>Distributed-Computing</a> · <a class=link-secondary href=/tags/gcp/>Gcp</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/spanner/>Spanner</a> · <a class=link-secondary href=/tags/spindle/>Spindle</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2022-09-21>September 21, 2022</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2021-07-31-extracting-grpc-funcs-to-list/>Extract gRPC-generated functions to a list</a></p><p class="mb-0 paige-description text-center">2021-07-31</p><p class="fst-italic mb-0 paige-summary text-center">This might be hacky and there might be a proper way to do this but recently, I needed to generate all the functions’ gRPC-generated full names from our protobuf definitions. This is part of our RBAC module that needs to filter gRPC function calls. I got the list from our generated Go client using the following command(s):
Main command: $ grep -o -R -i -E '"/blueapi..*"' . | awk -F':' '{gsub(/"/, "", $2); print "-", substr($2, 2);}' | sort | uniq # Actual commands; save as yaml: $ echo "functions:" > /tmp/funcs.</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/cmdline/>Cmdline</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/grpc/>Grpc</a> · <a class=link-secondary href=/tags/grpc-gateway/>Grpc-Gateway</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2021-07-31>July 31, 2021</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2021-06-30-hacky-way-update-go-modules/>A hacky way to update problematic Go modules</a></p><p class="mb-0 paige-description text-center">2021-06-30</p><p class="fst-italic mb-0 paige-summary text-center">The only options for updating modules that I’m aware so far are a) go get -u all, and b) specific modules, i.e. go get -u domain.com/module[@v1.2.3]. For problematic ones, my only option is b), which is a bit time consuming. There must be some other way out there that I’m not aware of but at the moment, I use this simple command:
$ cat go.mod | grep -i 'github' | grep -i -v 'indirect' | awk '{print $1}' > update; \ while read -r v; do go get -u $v; done &lt; update; rm update</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/modules/>Modules</a> · <a class=link-secondary href=/tags/update/>Update</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2021-06-30>June 30, 2021</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2021-05-31-switching-different-go-versions/>Switching to different Go versions</a></p><p class="mb-0 paige-description text-center">2021-05-31</p><p class="fst-italic mb-0 paige-summary text-center">I use this handy little script to switch between different Go (golang) versions:
#!/bin/bash $1 version &>/dev/null if [ $? -eq 0 ]; then ln -sf $GOPATH/bin/$1 $HOME/.local/bin/go go version exit 0 fi go get golang.org/dl/$1 && $1 download ln -sf $GOPATH/bin/$1 $HOME/.local/bin/go go version Saving this as an executable script goset, I could now switch to different versions like so:
$ goset go1.16.4 go version go1.16.4 linux/amd64</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/switch/>Switch</a> · <a class=link-secondary href=/tags/versions/>Versions</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2021-05-31>May 31, 2021</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2021-04-30-authenticate-aws-sdk-golang-v2/>Authenticating Go AWS SDK v2 using assume roles</a></p><p class="mb-0 paige-description text-center">2021-04-30</p><p class="fst-italic mb-0 paige-summary text-center">For self reference:
To authenticate the Golang AWS SDK v2 using assume roles, refer to the following code snippets:</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/assume/>Assume</a> · <a class=link-secondary href=/tags/aws/>Aws</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/roles/>Roles</a> · <a class=link-secondary href=/tags/sdk/>Sdk</a> · <a class=link-secondary href=/tags/v2/>V2</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2021-04-30>April 30, 2021</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2020-12-26-spanner-distributed-lock/>A Spanner-based distributed locking library</a></p><p class="mb-0 paige-description text-center">2020-12-26</p><p class="fst-italic mb-0 paige-summary text-center">I uploaded a yet another distributed locking library, this time, based on Cloud Spanner and TrueTime technology. It’s called spindle and you can find the code here. Maybe it will be useful to anybody out there.</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/distributed-lock/>Distributed-Lock</a> · <a class=link-secondary href=/tags/distributed-locking/>Distributed-Locking</a> · <a class=link-secondary href=/tags/gcp/>Gcp</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/spanner/>Spanner</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2020-12-26>December 26, 2020</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2020-08-31-dysync/>A tool for synching DynamoDB tables between accounts</a></p><p class="mb-0 paige-description text-center">2020-08-31</p><p class="fst-italic mb-0 paige-summary text-center">I uploaded a tool that can sync DynamoDB tables between accounts. It’s called dysync and you can find the code here. Maybe it will be useful to anybody out there.</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/aws/>Aws</a> · <a class=link-secondary href=/tags/dynamodb/>Dynamodb</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/sync/>Sync</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2020-08-31>August 31, 2020</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2020-05-13-lsdy-dynamodb-query/>A tool for querying DynamoDB</a></p><p class="mb-0 paige-description text-center">2020-05-13</p><p class="fst-italic mb-0 paige-summary text-center">I uploaded a tool that can query DynamoDB tables. It’s called lsdy and you can find the code here. Maybe it will be useful to anybody out there.</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/aws/>Aws</a> · <a class=link-secondary href=/tags/dynamodb/>Dynamodb</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/query/>Query</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2020-05-13>May 13, 2020</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2020-03-18-glog-gotest/>Output glog from go test</a></p><p class="mb-0 paige-description text-center">2020-03-18</p><p class="fst-italic mb-0 paige-summary text-center">If you’re using glog in your Go codes, you can output those when running go test … by using the –args parameter:
$ go test -v ./… -count=1 -cover -race -mod=vendor –args –logtostderr –v=1</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/glog/>Glog</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/test/>Test</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2020-03-18>March 18, 2020</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2020-02-27-cobra-tabwriter/>Using tabwriter to improve on cobra’s help information</a></p><p class="mb-0 paige-description text-center">2020-02-27</p><p class="fst-italic mb-0 paige-summary text-center">If you’ve been following the blog, you know that I’m a fan of cobra as a CLI library. Let me share how I use tabwriter to compliment cobra’s autogenerated help information. For reference, you can check this post as well.
The following code is a copy (not an exact copy) of one of the tools that I use at work.
It will look something like this.
Trigger a manual run, among other tools.</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/cobra/>Cobra</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/tabwriter/>Tabwriter</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2020-02-27>February 27, 2020</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2019-10-29-stderr-tee/>Output golang cmdline tools to stdout and file using tee</a></p><p class="mb-0 paige-description text-center">2019-10-29</p><p class="fst-italic mb-0 paige-summary text-center">Some golang-based tools I’ve used (or even written) use the builtin log package that output logs to stderr by default. I also use tee for piping console outputs to file for later viewing. This is the command I generally use:
Example tool: $ sometool –flag1 –flag2 2>&amp;1 | tee out.txt # 2>&amp;1 &lt;– redirect stderr to stdout # tee &lt;– pipe the console output to out.txt while retaining the actual console logs during command execution</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/stderr/>Stderr</a> · <a class=link-secondary href=/tags/stdout/>Stdout</a> · <a class=link-secondary href=/tags/tee/>Tee</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2019-10-29>October 29, 2019</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2019-07-30-homebrew-golang/>Using Homebrew for distributing Go (golang) apps</a></p><p class="mb-0 paige-description text-center">2019-07-30</p><p class="fst-italic mb-0 paige-summary text-center">For personal reference: a) Create your own homebrew tap Create a new GitHub public repository with a prefix homebrew-, i.e. homebrew-tap. This will house all the apps that you want to distribute via your tap. Users will install your apps using the following commands:
No need to include the 'homebrew-' prefix $ brew tap flowerinthenight/tap $ brew install &lt;toolname> The toolname part will correspond to the filename inside your repository tap.</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/go/>Go</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/homebrew/>Homebrew</a> · <a class=link-secondary href=/tags/ruby/>Ruby</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2019-07-30>July 30, 2019</time></p><p class="mb-0 paige-reading-time text-center text-secondary">2 minutes</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2019-03-09-athena2csv/>Download AWS Athena query results as CSV</a></p><p class="mb-0 paige-description text-center">2019-03-09</p><p class="fst-italic mb-0 paige-summary text-center">I recently uploaded a tool to GitHub that downloads AWS Athena query results as CSV. It’s called athena2csv. You can check out the code here. You might find this useful.</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/athena/>Athena</a> · <a class=link-secondary href=/tags/athena2csv/>Athena2csv</a> · <a class=link-secondary href=/tags/aws/>Aws</a> · <a class=link-secondary href=/tags/csv/>Csv</a> · <a class=link-secondary href=/tags/golang/>Golang</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2019-03-09>March 9, 2019</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2019-02-05-golang-cobra-klog/>Using k8s.io/klog together with cobra in golang</a></p><p class="mb-0 paige-description text-center">2019-02-05</p><p class="fst-italic mb-0 paige-summary text-center">This post is somehow related to a previous article about using glog together with cobra. This time, we will be using klog which is a Kubernetes fork of glog.
run the -h command $ ./cobraklog -h Usage of ./cobraklog: -alsologtostderr log to standard error as well as files -log_backtrace_at value when logging hits line file:N, emit a stack trace -log_dir string If non-empty, write log files in this directory -log_file string If non-empty, use this log file -logtostderr log to standard error instead of files -skip_headers If true, avoid header prefixes in the log messages -stderrthreshold value logs at or above this threshold go to stderr (default 2) -v value log level for V logs -vmodule value comma-separated list of pattern=N settings for file-filtered logging # run cobra's help command $ .</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/cobra/>Cobra</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/klog/>Klog</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2019-02-05>February 5, 2019</time></p><p class="mb-0 paige-reading-time text-center text-secondary">2 minutes</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2018-09-25-ouchan-monorepo/>Mobingi’s golang monorepo</a></p><p class="mb-0 paige-description text-center">2018-09-25</p><p class="fst-italic mb-0 paige-summary text-center">I posted an article for @mobingi about its Golang-based monorepo. Please check it out. Thanks.</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/go/>Go</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/mobingi/>Mobingi</a> · <a class=link-secondary href=/tags/monorepo/>Monorepo</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2018-09-25>September 25, 2018</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2018-02-06-golang-monorepo/>A golang-based monorepo example</a></p><p class="mb-0 paige-description text-center">2018-02-06</p><p class="fst-italic mb-0 paige-summary text-center">I uploaded an example of a golang-based monorepo in GitHub. This is a stripped down version of what we have @mobingi. If you are planning to have a golang-based monorepo, please have a look.</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/go/>Go</a> · <a class=link-secondary href=/tags/golang/>Golang</a> · <a class=link-secondary href=/tags/monorepo/>Monorepo</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2018-02-06>February 6, 2018</time></p><p class="mb-0 paige-reading-time text-center text-secondary">1 minute</p></div><div class="mb-3 paige-page paige-published w-100"><p class="mb-0 paige-title text-center"><a href=/blog/2017-12-01-golang-cobra-glog/>Using glog together with cobra in golang</a></p><p class="mb-0 paige-description text-center">2017-12-01</p><p class="fst-italic mb-0 paige-summary text-center">If you have been programming with golang, you’ve probably heard of cobra. I use it extensively at work and also in my personal projects.
Recently though, I’ve been using glog more and more. And I quite like it. The thing is, it has a couple of flag definitions in its init() function using golang’s builtin flag library. And I wanted to include those flags into cobra’s flag definitions. This is how I did it.</p><p class="mb-0 paige-keywords text-center text-secondary"><a class=link-secondary href=/tags/cobra/>Cobra</a> · <a class=link-secondary href=/tags/glog/>Glog</a> · <a class=link-secondary href=/tags/golang/>Golang</a></p><p class="mb-0 paige-date text-center text-secondary"><time datetime=2017-12-01>December 1, 2017</time></p><p class="mb-0 paige-reading-time text-center text-secondary">2 minutes</p></div></div></main><footer class=mb-3 id=paige-footer><p class="mb-0 text-center text-secondary" id=paige-copyright>© Flowerinthenight, 2016-2024. All rights reserved.</p><p class="mb-0 text-center" id=paige-credit><a class="link-secondary text-decoration-none" href=https://github.com/willfaught/paige>Paige Theme</a></p></footer></div></div></div><script crossorigin=anonymous defer integrity="sha256-gfPiYYSP+RNtNeRBt45mJombFJmNf0V0Ipu785Obi0M=" referrerpolicy=no-referrer src=/js/paige/bootstrap/bootstrap.bundle.min.81f3e261848ff9136d35e441b78e6626899b14998d7f4574229bbbf3939b8b43.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-EZWHM5C9YT"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EZWHM5C9YT")}</script><noscript>JavaScript is required</noscript></body></html>